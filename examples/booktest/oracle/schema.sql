CREATE TABLE authors (
  author_id NUMBER(6) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  name NVARCHAR2(255) NOT NULL
);

CREATE INDEX authors_name_idx ON authors(name);

CREATE TABLE books (
  book_id NUMBER(9) GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  author_id NUMBER(6) REFERENCES authors(author_id) NOT NULL,
  isbn VARCHAR2(255) UNIQUE NOT NULL,
  title VARCHAR2(255) NOT NULL,
  year NUMBER(4) DEFAULT 2000 NOT NULL,
  available TIMESTAMP WITH TIME ZONE NOT NULL,
  tags VARCHAR2(255)
);

CREATE INDEX books_title_idx ON books(title, year);
